{% load custom_filters %}

<!-- Liste prédéfinie (TODO par ex.) -->
<form method="post" action="{% url 'poll_votes' poll.id %}">
    {% csrf_token %}
    <ul>
        {% for option in vote_options %}
            {% has_voted user_votes_dict|get_item:option.id request.user.username 'oui' as voted %}
            {% if not voted %}
                <li>
                    <span>{{ option.name }}</span>
                    <button type="submit" name="proposal_{{ option.id }}" value="oui">Je m'en charge</button>
                </li>
            {% endif %}
        {% endfor %}
    </ul>
</form>

<!-- Récapitulatif option/user -->
<h1>Le petit récap</h1>
<form method="post" action="{% url 'poll_votes' poll.id %}">
    {% csrf_token %}
    <ul>
        {% for option in vote_options %}
            {% has_voted user_votes_dict|get_item:option.id request.user.username 'oui' as voted %}
            {% if voted %}
                <li>
                    <span>{{ option.name }}</span>
                    <button type="submit" name="proposal_{{ option.id }}" value="non">Annuler</button>
                </li>
            {% endif %}
        {% endfor %}
    </ul>
</form>