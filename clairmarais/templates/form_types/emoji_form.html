{% load custom_filters %}

<!-- Vote des utilisateurs sur les options propos√©es (ü§Æü§êüòã) -->
<form method="post" action="{% url 'poll_votes' poll.id %}">
    {% csrf_token %}
    {% for option in vote_options %}
        <div>   
            <span>{{ option.name }}</span>
            {% for emoji in vote_choices %}
                <input 
                type="radio" 
                name="proposal_{{ option.id }}" 
                value="{{ emoji }}" 
                id="{{ emoji }}_{{ option.id }}"
                {% has_voted user_votes_dict|get_item:option.id request.user.username emoji as voted %}
                {% if voted %}checked{% endif %}>
                <label for="{{ emoji }}_{{ option.id }}">{{ emoji }}</label>
            {% endfor %}
        </div>

        <!-- Si l'utilisateur a ajout√© cette option, il peut la retirer -->
        {% if option.user.username == user.username %}
            <span class="supp">Ajout√© par moi ü§ö</span>
            <button type="submit" name="delete_option" value="{{ option.id }}">Supprimer</button>
        {% endif %}
    {% endfor %}
    <div>
        <button type="submit" name="submit_votes">Voter</button>
    </div>
</form>

<!-- Ajout d'option par les utilisateurs -->
<h1>J'ai une autre id√©e</h1>
{% include "form_types/add_option_form.html" %}
