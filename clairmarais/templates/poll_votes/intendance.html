{% load custom_filters %}
{% load static %}

<form method="post" action="{% url 'poll_details' poll.id %}">
    {% csrf_token %}

    {% for option in vote_options %}
        <li>
            <div>
                {{ option }}
                <input type="radio" name="proposal_{{ option.id }}" value="oui" response="oui" id="oui_{{ option.id }}"
                {% if user_votes_dict|get_item:option.id == 'oui' %}checked{% endif %}>
                    <label for="oui_{{ option.id }}">Oui</label>
                    <input type="radio" name="proposal_{{ option.id }}" value="non" response="non" id="non_{{ option.id }}"
                {% if user_votes_dict|get_item:option.id == 'non' %}checked{% endif %}>
                    <label for="non_{{ option.id }}">Non</label>
            </div>
            <div>
                {% with option_users_dict|get_item:option.id as users %}
                    <div>
                        
                        {% if users.oui %}
                        <p>âœ‹ðŸ˜Š {{ users.oui|join:", " }}</p>
                        {% endif %}
                        
                    </div>
                    <div>
                        
                        {% if users.non %}
                        <p>ðŸ‘ŽðŸ˜­ {{ users.non|join:", " }}</p>
                        {% endif %}
                        
                    </div>
                {% endwith %}
            </div>
        </li>
    {% endfor %}
    <br>
    <button type="submit">Voter</button>
</form>